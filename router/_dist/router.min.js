class Route{constructor(t,e,i,n){this.path=t,this.htmlPath=e,this.JSPath=i,this.title=n||""}async getHtmlContent(){let t=await fetch(this.htmlPath);return t.text()}}class Router{constructor(t,e,i=null){if(!t||!(t instanceof HTMLElement))throw Error("entryDOM is required and must be a DOM element");if(!e||!(e instanceof Route))throw Error("notFoundRoute is required and must be an instance of Route");this.routes=[],this.entry=t,this.notFoundRoute=e,this.loadingRoute=i,window.onpopstate=t=>this.handlePopState(t)}addRoute(t){this.routes.push(t)}getCurrentPath(){return window.location.pathname}isPathActive(t){return this.getCurrentPath()===t}isRouteActive(t){return this.isPathActive(t.path)}async init(){let t=this.getCurrentPath();await this.navigateTo(t)}async navigateTo(t){this.loadingRoute&&(document.title=this.loadingRoute.title||"Loading...",this.entry.innerHTML=await this.loadingRoute.getHtmlContent());let e=this.routes.find(e=>e.path===t)||this.notFoundRoute;document.title=e.title||"Document",this.entry.innerHTML=await e.getHtmlContent();let i=document.getElementById("page_script");i&&i.remove();let n=document.createElement("script");n.src=e.JSPath,n.id="page_script",document.body.appendChild(n);let a=t.startsWith("/")?t:`/${t}`;window.history.pushState({path:a},"",a)}handlePopState=t=>{let e=t.state?t.state.path:this.notFoundRoute.path;console.log(e),this.navigateTo(e)}}export{Route,Router};